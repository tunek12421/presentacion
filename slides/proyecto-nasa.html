<!-- ==========================================
     PROYECTO: ARAWAN - NASA Weather Risk API
     Autor: [Nombre del Estudiante]
     ========================================== -->

<!-- SEPARADOR: Inicio del Proyecto -->
<section class="proyecto-separador">
    <div class="proyecto-num">Proyecto 4</div>
    <h1>ARAWAN<br>NASA Weather Risk API</h1>
    <p class="proyecto-autor">Autor: [Nombre del Estudiante]</p>
</section>

<!-- PORTADA -->
<section class="portada">
    <h1>API de Análisis de Riesgo Climático con 30 Años de Datos NASA</h1>
    <p class="subtitle">Proyecto de Desarrollo de Software</p>
</section>

<!-- EL PROBLEMA -->
<section>
    <h2>El Problema</h2>
    <div class="grid-simple">
        <div class="item-num">
            <div class="item-num-titulo">Datos Dispersos</div>
            <div class="item-num-texto">La información climática histórica no es accesible de forma simple para productores agrícolas.</div>
        </div>
        <div class="item-num">
            <div class="item-num-titulo">Sin Predicción</div>
            <div class="item-num-texto">No existen herramientas locales que predigan tendencias climáticas basadas en datos históricos.</div>
        </div>
        <div class="item-num">
            <div class="item-num-titulo">Riesgos Desconocidos</div>
            <div class="item-num-texto">Los agricultores no tienen forma de evaluar riesgos de heladas, tormentas o calor extremo.</div>
        </div>
        <div class="item-num">
            <div class="item-num-titulo">Decisiones a Ciegas</div>
            <div class="item-num-texto">Las decisiones de siembra y cosecha se toman sin análisis estadístico del clima histórico.</div>
        </div>
    </div>
</section>

<!-- LA SOLUCIÓN -->
<section>
    <h2>La Solución</h2>
    <div class="destacado-central">
        <p>API que analiza 30 años de datos climáticos NASA para predecir tendencias y calcular scores de riesgo para cualquier ubicación geográfica.</p>
    </div>
    <div class="grid-simple" style="margin-top: 1.5em;">
        <div>
            <h3>Características</h3>
            <ul>
                <li>30 años de datos históricos NASA</li>
                <li>Predicción con regresión lineal</li>
                <li>Scores de riesgo (helada, tormenta, calor)</li>
                <li>Interpolación horaria de temperatura</li>
            </ul>
        </div>
        <div>
            <h3>Tecnologías</h3>
            <ul>
                <li><strong>Backend:</strong> Node.js (http nativo)</li>
                <li><strong>Datos:</strong> NASA POWER API</li>
                <li><strong>IA:</strong> Google Gemini 2.5</li>
                <li><strong>Mapas:</strong> Leaflet + Chart.js</li>
            </ul>
        </div>
    </div>
</section>

<!-- FUENTES DE DATOS -->
<section>
    <h2>Fuentes de Datos Externas</h2>
    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1.5em; margin-top: 1.5em;">
        <div style="background: #f5f5f5; padding: 1.2em; border-radius: 4px; border-top: 3px solid #333;">
            <h3 style="font-size: 0.8em; margin: 0 0 0.5em 0; color: #333;">NASA POWER API</h3>
            <p style="font-size: 0.5em; color: #555; margin: 0;">30 años de datos diarios: temperatura máx/mín, humedad, viento, precipitación, radiación solar.</p>
        </div>
        <div style="background: #f5f5f5; padding: 1.2em; border-radius: 4px; border-top: 3px solid #333;">
            <h3 style="font-size: 0.8em; margin: 0 0 0.5em 0; color: #333;">Open Topo Data</h3>
            <p style="font-size: 0.5em; color: #555; margin: 0;">Datos de elevación topográfica para ajustar predicciones según altitud del terreno.</p>
        </div>
        <div style="background: #f5f5f5; padding: 1.2em; border-radius: 4px; border-top: 3px solid #333;">
            <h3 style="font-size: 0.8em; margin: 0 0 0.5em 0; color: #333;">Photon / Nominatim</h3>
            <p style="font-size: 0.5em; color: #555; margin: 0;">Geocodificación y geocodificación inversa basada en OpenStreetMap.</p>
        </div>
        <div style="background: #f5f5f5; padding: 1.2em; border-radius: 4px; border-top: 3px solid #333;">
            <h3 style="font-size: 0.8em; margin: 0 0 0.5em 0; color: #333;">Google Gemini 2.5</h3>
            <p style="font-size: 0.5em; color: #555; margin: 0;">Procesamiento de lenguaje natural para consultas conversacionales sobre el clima.</p>
        </div>
    </div>
</section>

<!-- PIPELINE DE ANÁLISIS -->
<section>
    <h2>Pipeline de Análisis</h2>
    <div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 0.5em; margin-top: 1.5em;">
        <div style="background: #f5f5f5; padding: 0.8em 1em; border-radius: 4px; border-left: 3px solid #333; font-size: 0.55em;">
            <strong>1.</strong> Fetch NASA (30 años)
        </div>
        <div style="font-size: 1.2em; color: #333; align-self: center;">→</div>
        <div style="background: #f5f5f5; padding: 0.8em 1em; border-radius: 4px; border-left: 3px solid #333; font-size: 0.55em;">
            <strong>2.</strong> Extraer fecha objetivo
        </div>
        <div style="font-size: 1.2em; color: #333; align-self: center;">→</div>
        <div style="background: #f5f5f5; padding: 0.8em 1em; border-radius: 4px; border-left: 3px solid #333; font-size: 0.55em;">
            <strong>3.</strong> Limpiar outliers (IQR)
        </div>
        <div style="font-size: 1.2em; color: #333; align-self: center;">→</div>
        <div style="background: #f5f5f5; padding: 0.8em 1em; border-radius: 4px; border-left: 3px solid #333; font-size: 0.55em;">
            <strong>4.</strong> Estadísticas
        </div>
    </div>
    <div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 0.5em; margin-top: 0.5em;">
        <div style="background: #f5f5f5; padding: 0.8em 1em; border-radius: 4px; border-left: 3px solid #333; font-size: 0.55em;">
            <strong>5.</strong> Regresión lineal
        </div>
        <div style="font-size: 1.2em; color: #333; align-self: center;">→</div>
        <div style="background: #f5f5f5; padding: 0.8em 1em; border-radius: 4px; border-left: 3px solid #333; font-size: 0.55em;">
            <strong>6.</strong> Predecir tendencia
        </div>
        <div style="font-size: 1.2em; color: #333; align-self: center;">→</div>
        <div style="background: #f5f5f5; padding: 0.8em 1em; border-radius: 4px; border-left: 3px solid #333; font-size: 0.55em;">
            <strong>7.</strong> Calcular riesgos
        </div>
        <div style="font-size: 1.2em; color: #333; align-self: center;">→</div>
        <div style="background: #f5f5f5; padding: 0.8em 1em; border-radius: 4px; border-left: 3px solid #333; font-size: 0.55em;">
            <strong>8.</strong> Interpolar horas
        </div>
    </div>
</section>

<!-- SCORES DE RIESGO -->
<section>
    <h2>Scores de Riesgo</h2>
    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1.5em; margin-top: 1.5em;">
        <div style="background: #f5f5f5; padding: 1.2em; border-radius: 4px; border-top: 3px solid #333;">
            <h3 style="font-size: 0.8em; margin: 0 0 0.5em 0; color: #333;">Heladas</h3>
            <p style="font-size: 0.5em; color: #555; margin: 0 0 0.5em 0;">Probabilidad de temperatura mínima bajo 0°C o 5°C basada en percentiles históricos.</p>
            <p style="font-size: 0.45em; color: #777; margin: 0;"><strong>Niveles:</strong> BAJO / MEDIO / ALTO</p>
        </div>
        <div style="background: #f5f5f5; padding: 1.2em; border-radius: 4px; border-top: 3px solid #333;">
            <h3 style="font-size: 0.8em; margin: 0 0 0.5em 0; color: #333;">Tormentas</h3>
            <p style="font-size: 0.5em; color: #555; margin: 0 0 0.5em 0;">Evaluación de intensidad de viento y precipitación combinada con umbrales críticos.</p>
            <p style="font-size: 0.45em; color: #777; margin: 0;"><strong>Niveles:</strong> BAJO / MEDIO / ALTO</p>
        </div>
        <div style="background: #f5f5f5; padding: 1.2em; border-radius: 4px; border-top: 3px solid #333;">
            <h3 style="font-size: 0.8em; margin: 0 0 0.5em 0; color: #333;">Estrés Térmico</h3>
            <p style="font-size: 0.5em; color: #555; margin: 0 0 0.5em 0;">Análisis de temperaturas máximas extremas y umbrales de calor peligroso.</p>
            <p style="font-size: 0.45em; color: #777; margin: 0;"><strong>Niveles:</strong> BAJO / MEDIO / ALTO</p>
        </div>
    </div>
    <p style="font-size: 0.55em; color: #666; margin-top: 1.5em; text-align: center;">Cada riesgo incluye score 0-100, nivel de severidad y recomendaciones accionables.</p>
</section>

<!-- ARQUITECTURA -->
<section>
    <h2>Arquitectura del Sistema</h2>
    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1.5em; margin-top: 1.5em;">
        <div style="background: #f5f5f5; padding: 1.2em; border-radius: 4px; border-top: 3px solid #333;">
            <h3 style="font-size: 0.75em; margin: 0 0 0.3em 0; color: #333;">Backend</h3>
            <p style="font-size: 0.9em; font-weight: 600; margin: 0 0 0.8em 0; color: #333;">Node.js Nativo</p>
            <ul style="font-size: 0.5em; margin: 0; padding-left: 1.2em; color: #555;">
                <li>HTTP server sin frameworks</li>
                <li>Retry con backoff exponencial</li>
                <li>Caché en memoria</li>
                <li>Timeout 60s para NASA</li>
            </ul>
        </div>
        <div style="background: #f5f5f5; padding: 1.2em; border-radius: 4px; border-top: 3px solid #333;">
            <h3 style="font-size: 0.75em; margin: 0 0 0.3em 0; color: #333;">Análisis</h3>
            <p style="font-size: 0.9em; font-weight: 600; margin: 0 0 0.8em 0; color: #333;">Estadístico</p>
            <ul style="font-size: 0.5em; margin: 0; padding-left: 1.2em; color: #555;">
                <li>Media, mediana, percentiles</li>
                <li>Desviación estándar</li>
                <li>Regresión lineal ponderada</li>
                <li>Coeficiente R² de confianza</li>
            </ul>
        </div>
        <div style="background: #f5f5f5; padding: 1.2em; border-radius: 4px; border-top: 3px solid #333;">
            <h3 style="font-size: 0.75em; margin: 0 0 0.3em 0; color: #333;">Frontend</h3>
            <p style="font-size: 0.9em; font-weight: 600; margin: 0 0 0.8em 0; color: #333;">Leaflet + Chart.js</p>
            <ul style="font-size: 0.5em; margin: 0; padding-left: 1.2em; color: #555;">
                <li>Mapa interactivo</li>
                <li>Gráficos de tendencias</li>
                <li>Animaciones por clima</li>
                <li>Responsive design</li>
            </ul>
        </div>
    </div>
</section>

<!-- API ENDPOINTS -->
<section>
    <h2>API Endpoints</h2>
    <div class="tabla-2col">
        <div class="tabla-row">
            <div class="tabla-cell tabla-cell-left">
                <h3>GET /weather</h3>
                <p style="font-size: 0.5em; color: #555;">Endpoint principal de análisis climático.</p>
                <ul style="font-size: 0.5em;">
                    <li><strong>lat, lon:</strong> Coordenadas</li>
                    <li><strong>date:</strong> Fecha (MMDD)</li>
                    <li><strong>hour:</strong> Hora opcional (0-23)</li>
                </ul>
                <p style="font-size: 0.45em; color: #777; font-family: monospace;">/weather?lat=-17.39&lon=-66.15&date=1004&hour=15</p>
            </div>
            <div class="tabla-cell">
                <h3>POST /chat</h3>
                <p style="font-size: 0.5em; color: #555;">Interfaz conversacional con IA.</p>
                <ul style="font-size: 0.5em;">
                    <li>Recibe preguntas en lenguaje natural</li>
                    <li>Gemini extrae ubicación, fecha, hora</li>
                    <li>Llama internamente a /weather</li>
                    <li>Devuelve análisis + respuesta IA</li>
                </ul>
            </div>
        </div>
    </div>
</section>

<!-- FUNCIONALIDADES DESTACADAS -->
<section>
    <h2>Funcionalidades Destacadas</h2>
    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1.5em; margin-top: 1.5em;">
        <div style="background: #f5f5f5; padding: 1.2em; border-radius: 4px; border-left: 4px solid #333;">
            <h3 style="font-size: 0.75em; margin: 0 0 0.5em 0; color: #333; font-weight: 600;">Interpolación Horaria</h3>
            <p style="font-size: 0.55em; margin: 0; color: #555;">Modelo sinusoidal del ciclo diario de temperatura. Mínimo a las 6 AM, máximo a las 3 PM con ajustes estacionales.</p>
        </div>
        <div style="background: #f5f5f5; padding: 1.2em; border-radius: 4px; border-left: 4px solid #333;">
            <h3 style="font-size: 0.75em; margin: 0 0 0.5em 0; color: #333; font-weight: 600;">Detección de Outliers</h3>
            <p style="font-size: 0.55em; margin: 0; color: #555;">Método IQR (Rango Intercuartílico) para filtrar datos atípicos y mejorar la precisión de las predicciones.</p>
        </div>
        <div style="background: #f5f5f5; padding: 1.2em; border-radius: 4px; border-left: 4px solid #333;">
            <h3 style="font-size: 0.75em; margin: 0 0 0.5em 0; color: #333; font-weight: 600;">Corrección por Elevación</h3>
            <p style="font-size: 0.55em; margin: 0; color: #555;">Ajusta predicciones según altitud topográfica del terreno usando datos de Open Topo Data API.</p>
        </div>
        <div style="background: #f5f5f5; padding: 1.2em; border-radius: 4px; border-left: 4px solid #333;">
            <h3 style="font-size: 0.75em; margin: 0 0 0.5em 0; color: #333; font-weight: 600;">Chat Natural con IA</h3>
            <p style="font-size: 0.55em; margin: 0; color: #555;">Gemini 2.5 Flash procesa preguntas como "¿Lloverá mañana en Cochabamba?" y devuelve análisis completo.</p>
        </div>
    </div>
</section>

<!-- DEMO / CAPTURAS -->
<section>
    <h2>Demostración</h2>
    <div class="destacado-central">
        <p>Demo en vivo del sistema</p>
    </div>
    <div class="grid-simple" style="margin-top: 1em;">
        <div style="text-align: center;">
            <p style="font-size: 0.6em; color: #666;">Mapa Interactivo</p>
        </div>
        <div style="text-align: center;">
            <p style="font-size: 0.6em; color: #666;">Análisis de Riesgo</p>
        </div>
    </div>
</section>
